import React from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useDispatch, useSelector } from 'react-redux';

import './Cart.scss';

import Item from '../../components/Item';

import { setClearItem } from '../../redux/slices/cartSlice';

const Cart = () => {
  const dispatch = useDispatch();
  const navigate = useNavigate();

  const { cartItems, totalPrice, totalCount } = useSelector((state) => state.cart);

  const onClickClearCart = () => {
    dispatch(setClearItem());
    navigate('/empty_cart');
  };

  console.log(cartItems);
  return (
    <>
      <header>
        <Link to="/">
          <div className="logo">
            <svg
              width="80"
              height="80"
              viewBox="0 0 80 80"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <g clipPath="url(#clip0_2_143)">
                <path
                  d="M44.1361 62.7456C43.4907 62.6248 42.869 63.0513 42.7484 63.6973L41.9806 67.8168C41.8601 68.4628 42.2862 69.084 42.9323 69.2045C43.0059 69.2182 44.085 69.3842 44.32 68.2528L45.0878 64.1332C45.2079 63.4871 44.782 62.8659 44.1361 62.7456Z"
                  fill="white"
                />
                <path
                  d="M68.9529 2.02949C68.6471 1.23902 68.0517 0.614953 67.2764 0.272294C66.5014 -0.0702077 65.639 -0.0902078 64.8487 0.215731L52.8174 4.87263C52.1446 5.13295 51.5752 5.62029 51.2145 6.24514L43.4239 19.7391C43.8286 17.2204 43.7392 14.1838 43.1495 10.6692C42.8692 9.07625 42.2328 8.10109 41.2575 7.77078C39.9678 7.33343 38.8637 8.30172 38.7501 8.40594C35.117 11.6849 27.9605 11.6055 27.8893 11.6036C27.881 11.6033 27.8738 11.6031 27.8646 11.6035C26.6593 11.6035 25.4931 11.8563 24.3989 12.355C23.8008 12.6275 23.5372 13.333 23.8097 13.9311C24.082 14.5291 24.7874 14.7932 25.3858 14.5203C26.1661 14.1649 26.9977 13.9839 27.8579 13.983C28.3239 13.99 36.0934 14.0941 40.3525 10.1652C40.6609 9.88079 40.7007 10.4844 40.8043 11.0722C41.2339 13.6324 41.572 17.1688 40.9303 20.1158H39.8759C39.2187 20.1158 38.686 20.6484 38.686 21.3057C38.686 21.963 39.2185 22.4955 39.8759 22.4955H41.0789C43.78 22.9243 45.8072 25.2896 45.8072 28.0309V28.2467C45.3705 28.0751 44.9142 27.9401 44.4417 27.8454C43.7975 27.7168 43.1703 28.134 43.0415 28.7784C42.9126 29.4228 43.3448 29.9906 43.9745 30.1786C49.1614 31.7269 48.5741 36.1002 48.5619 36.2519H14.4789C14.4667 36.0998 14.4593 35.9473 14.4593 35.7948C14.4593 33.1006 16.3762 30.7428 19.017 30.1887C19.6601 30.0537 20.072 29.4231 19.9372 28.78C19.8023 28.1367 19.1719 27.7248 18.5284 27.8598C18.0783 27.9542 17.6436 28.0865 17.2259 28.2515V28.0307C17.2259 25.2895 19.2528 22.9241 21.9544 22.4954H22.8302C23.4874 22.4954 24.02 21.9629 24.02 21.3055C24.02 20.6482 23.4875 20.1157 22.8302 20.1157H21.8652C21.8567 20.1157 21.7958 18.8371 22.2386 17.8546C22.5084 17.2554 22.1708 16.5529 21.558 16.3158C20.9448 16.0788 20.2955 16.4004 20.0192 16.9965C19.2578 18.639 19.4711 20.526 19.4948 20.7838C14.2607 23.4556 14.8806 29.2153 14.9454 29.6254C11.4843 32.4009 12.1031 36.4756 12.1459 36.813C11.9057 36.9824 11.6878 37.187 11.4998 37.4245C10.9099 38.1695 10.697 39.1274 10.9151 40.0524L12.2557 45.736C12.5667 47.0543 13.679 47.9982 15.0082 48.1063L20.6523 76.9713C20.9977 78.7263 22.5461 80.0001 24.3347 80.0001H39.0123C40.8196 80.0001 42.3712 78.7107 42.7018 76.9345L43.5583 72.3399C43.6787 71.6941 43.2526 71.0727 42.6065 70.9522C41.9618 70.8318 41.3395 71.2579 41.2189 71.904L40.3625 76.4988C40.2414 77.149 39.6737 77.6206 39.0123 77.6206H24.3347C23.6803 77.6206 23.1136 77.1545 22.9875 76.5134L18.8322 55.2628H44.3201L43.5322 59.4906C43.4117 60.1365 43.8378 60.7578 44.4839 60.8783C44.5576 60.892 45.6512 61.0153 45.8715 59.9265L48.0753 48.1018C49.3858 47.9773 50.4783 47.0401 50.7858 45.7357L52.1264 40.0521C52.3447 39.1269 52.1313 38.1689 51.5416 37.4242C51.3539 37.1872 51.1364 36.9825 50.8967 36.8133C50.9395 36.4758 50.9617 36.1356 50.9617 35.7945C50.9617 33.3544 49.8591 31.1187 48.09 29.6153C48.1536 29.2086 48.4867 26.412 47.6347 25.1357L56.1505 10.3859L67.139 6.13264C67.9293 5.8267 68.5532 5.23139 68.8957 4.45622C69.2387 3.68169 69.2589 2.8195 68.9529 2.02949ZM44.7637 52.8834H18.3669L17.4348 48.1174H45.6519L44.7637 52.8834ZM49.1184 38.6316C49.337 38.6316 49.5403 38.7299 49.6763 38.9016C49.8119 39.0728 49.8609 39.2933 49.8108 39.5063L48.4702 45.1899C48.3942 45.5124 48.1094 45.7379 47.778 45.7379H15.2642C14.9326 45.7379 14.6479 45.5124 14.5718 45.1899L13.2312 39.5063C13.181 39.2931 13.23 39.0728 13.3656 38.9016C13.5014 38.7299 13.7048 38.6316 13.9236 38.6316H49.1184ZM66.7195 3.49481C66.634 3.68872 66.4779 3.83747 66.2803 3.91403L54.9007 8.31875C54.6475 8.41656 54.4353 8.59844 54.2997 8.83344L46.2283 22.8137C45.8723 22.4026 45.474 22.0287 45.0417 21.6963L53.2753 7.43499C53.3655 7.2789 53.5077 7.15687 53.676 7.09187L65.7079 2.43481C65.9053 2.35856 66.1209 2.3634 66.3146 2.44903C66.5085 2.53465 66.6571 2.69043 66.7337 2.88825C66.8101 3.08575 66.8051 3.30122 66.7195 3.49481Z"
                  fill="white"
                />
                <path
                  d="M31.6794 57.6954C27.641 57.6954 24.3555 60.9809 24.3555 65.0194C24.3555 69.0577 27.641 72.3432 31.6794 72.3432C35.7179 72.3432 39.0034 69.0577 39.0034 65.0194C39.0034 60.9808 35.7179 57.6954 31.6794 57.6954ZM31.6794 69.9635C28.953 69.9635 26.7352 67.7455 26.7352 65.0192C26.7352 62.2928 28.9532 60.075 31.6796 60.075C34.406 60.075 36.6238 62.2931 36.6238 65.0192C36.6237 67.7455 34.4058 69.9635 31.6794 69.9635Z"
                  fill="white"
                />
                <path
                  d="M29.2005 33.4747C29.8419 33.4747 30.3619 32.9547 30.3619 32.3133C30.3619 31.6718 29.8419 31.1519 29.2005 31.1519C28.559 31.1519 28.0391 31.6718 28.0391 32.3133C28.0391 32.9547 28.559 33.4747 29.2005 33.4747Z"
                  fill="white"
                />
                <path
                  d="M36.9849 28.0856C37.6263 28.0856 38.1463 27.5657 38.1463 26.9242C38.1463 26.2828 37.6263 25.7628 36.9849 25.7628C36.3435 25.7628 35.8235 26.2828 35.8235 26.9242C35.8235 27.5657 36.3435 28.0856 36.9849 28.0856Z"
                  fill="white"
                />
                <path
                  d="M30.3617 20.409C31.0032 20.409 31.5231 19.889 31.5231 19.2476C31.5231 18.6062 31.0032 18.0862 30.3617 18.0862C29.7203 18.0862 29.2003 18.6062 29.2003 19.2476C29.2003 19.889 29.7203 20.409 30.3617 20.409Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_2_143">
                  <rect width="80" height="80" fill="white" />
                </clipPath>
              </defs>
            </svg>
            <div className="logo--info">
              <h2>Cocktail Party</h2>
              <p>Ням-Ням</p>
            </div>
          </div>
        </Link>
      </header>
      <section className="main-section">
        <div className="main-section--header">
          <h1>Корзина</h1>
          <div onClick={() => onClickClearCart()} className="clear-cart">
            <svg
              width="32"
              height="32"
              viewBox="0 0 32 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M26.6661 3.98301H20.4001C20.1789 1.75005 18.29 0 15.9998 0C13.7095 0 11.8207 1.75005 11.5994 3.98301H5.33349C3.45341 3.98301 1.92383 5.51258 1.92383 7.39266C1.92383 9.216 3.36247 10.7095 5.16424 10.7981V27.8822C5.16424 30.1528 7.01144 32 9.28201 32H22.7177C24.9883 32 26.8355 30.1528 26.8355 27.8822V10.7981C28.6372 10.7096 30.0759 9.21607 30.0759 7.39273C30.0759 5.51258 28.5463 3.98301 26.6661 3.98301ZM15.9998 2.09378C17.1335 2.09378 18.0801 2.90848 18.2862 3.98301H13.7134C13.9195 2.90848 14.8661 2.09378 15.9998 2.09378ZM24.7416 27.8823C24.7416 28.9984 23.8337 29.9063 22.7176 29.9063H9.28194C8.16589 29.9063 7.25795 28.9984 7.25795 27.8823V10.8024C8.1125 10.8024 24.0733 10.8024 24.7416 10.8024V27.8823ZM26.6661 8.70861C26.4479 8.70861 5.51906 8.70861 5.33349 8.70861C4.60792 8.70861 4.01761 8.1183 4.01761 7.39273C4.01761 6.66717 4.60792 6.07686 5.33349 6.07686H26.6661C27.3917 6.07686 27.982 6.66717 27.982 7.39273C27.982 8.1183 27.3918 8.70861 26.6661 8.70861Z"
                fill="white"
              />
              <path
                d="M16 27.3813C16.5782 27.3813 17.0469 26.9126 17.0469 26.3344V14.2111C17.0469 13.6329 16.5783 13.1642 16 13.1642C15.4219 13.1642 14.9531 13.6329 14.9531 14.2111V26.3344C14.9531 26.9126 15.4219 27.3813 16 27.3813Z"
                fill="white"
              />
              <path
                d="M21.4033 27.3813C21.9815 27.3813 22.4502 26.9126 22.4502 26.3344V14.2111C22.4502 13.6329 21.9815 13.1642 21.4033 13.1642C20.8252 13.1642 20.3564 13.6329 20.3564 14.2111V26.3344C20.3564 26.9126 20.8252 27.3813 21.4033 27.3813Z"
                fill="white"
              />
              <path
                d="M10.5962 27.3813C11.1744 27.3813 11.6431 26.9126 11.6431 26.3344V14.2111C11.6431 13.6329 11.1744 13.1642 10.5962 13.1642C10.018 13.1642 9.54932 13.6329 9.54932 14.2111V26.3344C9.54932 26.9126 10.018 27.3813 10.5962 27.3813Z"
                fill="white"
              />
            </svg>
            <h3>Очистить корзину</h3>
          </div>
        </div>
        <div className="items">
          {cartItems.map((obj, i) => (
            <Item
              key={i}
              img={obj.imageUrl}
              name={obj.name}
              price={obj.price * obj.count}
              count={obj.count}
            />
          ))}
        </div>
        <div className="count-price">
          <div className="count">
            <h3>Всего: </h3>
            <span>{totalCount} шт.</span>
          </div>
          <div className="price">
            <h3>Сумма заказа: </h3>
            <span>{totalPrice} ₽</span>
          </div>
        </div>
        <div className="buttons">
          <Link to="/catalog">
            <button className="clear">Вернуться назад</button>
          </Link>
          <button className="pink">Оплатить заказ</button>
        </div>
      </section>
    </>
  );
};

export default Cart;
